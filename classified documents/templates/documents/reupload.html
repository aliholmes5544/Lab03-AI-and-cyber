{% extends "base.html" %}
{% block title %}{{ t('reupload_title') }}: {{ doc.title }} - {{ t('app_title') }}{% endblock %}

{% block content %}
<div class="row justify-content-center">
    <div class="col-md-8">
        <div class="card shadow">
            <div class="card-header">
                <h4 class="mb-0"><i class="bi bi-upload"></i> {{ t('reupload_title') }}</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-info">
                    <strong>{{ t('document') }}:</strong> {{ doc.title }}<br>
                    <strong>{{ t('current_file') }}:</strong> {{ doc.original_filename }}
                    ({{ "%.1f"|format(doc.file_size / 1024) }} KB)
                </div>

                <form method="POST" enctype="multipart/form-data">
                    {{ form.hidden_tag() }}

                    <div class="mb-3">
                        <label class="form-label">{{ t('label_new_file') }}</label>
                        {{ form.file(class="form-control") }}
                        {% if form.file.errors %}
                        <div class="text-danger small">{{ form.file.errors[0] }}</div>
                        {% endif %}
                        <div class="form-text">{{ t('max_file_size') }}</div>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">{{ t('label_change_notes') }}</label>
                        {{ form.change_notes(class="form-control", rows=3, placeholder=t('placeholder_change_notes')) }}
                        {% if form.change_notes.errors %}
                        <div class="text-danger small">{{ form.change_notes.errors[0] }}</div>
                        {% endif %}
                    </div>

                    <div class="d-flex justify-content-between">
                        <a href="{{ url_for('documents.detail', doc_id=doc.id) }}" class="btn btn-secondary">
                            {{ t('btn_cancel') }}
                        </a>
                        {{ form.submit(class="btn btn-primary") }}
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
